name = "agent-dark-pool"
main = "src/index.ts"
compatibility_date = "2024-11-27"
node_compat = true

# D1 Database binding for private transactions
# SETUP: Run `npx wrangler d1 create agent-dark-pool-db` to get your database_id
# Then replace YOUR_DATABASE_ID_HERE with the actual ID
[[d1_databases]]
binding = "DB"
database_name = "agent-dark-pool-db"
database_id = "YOUR_DATABASE_ID_HERE"

# Environment variables
[vars]
ENVIRONMENT = "development"
PRIVACY_PREMIUM_PERCENT = "5"
MAX_BATCH_SIZE = "10"
BATCH_WINDOW_SECONDS = "30"

# Cron triggers for batch processing
[triggers]
crons = [
  "*/30 * * * *"  # Process batched transactions every 30 seconds
]

# Observability configuration
[observability]
enabled = true

[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true

[observability.traces]
enabled = true
head_sampling_rate = 1
persist = true
